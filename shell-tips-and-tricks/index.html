<!DOCTYPE html>
<html>
  <head>
    <title>Shell - tips and tricks &mdash; @rhrn</title>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width">
    <meta charset="utf-8">
  </head>
  <body>
    <div class="row-fluid header">
      <div class="span8 offset2"><a href="/"><img src="/static/img/rhrn-github-io-qr.png"></a></div>
    </div>
    <div class="row-fluid content">
      <div class="span8 offset2"><h3 id="shell-tips-and-tricks">Shell tips and tricks</h3>
<ul>
<li><p>Show parent process id</p>
<pre><code>ps -o ppid= {pid}
</code></pre></li>
<li><p>Show process file by name</p>
<pre><code>ps -p {pid} -o comm=
</code></pre></li>
<li><p>Show opened ports</p>
<pre><code>sudo netstat -nlp
sudo ss -nlpt # or
</code></pre></li>
<li><p>Sort ps output by memory</p>
<pre><code>ps aux --sort -rss
</code></pre></li>
<li><p>Gen certificates pair</p>
<pre><code>openssl req -nodes -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 9999 -subj &#39;/CN=localhost&#39;
</code></pre></li>
<li><p>Show certificate expiration</p>
<pre><code>openssl s_client -showcerts -connect {host}:{port} &lt;/dev/null | openssl x509 -noout -dates
</code></pre></li>
<li><p>Check certificates on match</p>
<pre><code>openssl x509 -noout -modulus -in server.crt | openssl md5
openssl rsa -noout -modulus -in server.key | openssl md5
openssl req -noout -modulus -in server.csr | openssl md5
</code></pre></li>
<li><p>Change terminal size. Useful for android adb shell</p>
<pre><code>stty rows 60 cols 156
</code></pre></li>
<li><p>Full copy directory</p>
<pre><code>rsync -avxHAX --progress / /new-disk/
</code></pre></li>
<li><p>Show disk usage by directories inlcude hidden</p>
<pre><code>du -sch .[!.]* * | sort -h
</code></pre></li>
<li><p>Round png image</p>
<pre><code>convert -size 512x512 xc:none -fill white -draw &#39;roundRectangle 0,0 512,512 50,50&#39; in.png -compose SrcIn -composite rounded.png
</code></pre></li>
<li><p>ssh tunnel from remote <code>localhost:8080</code> to local machine <code>localhost:8082</code></p>
<pre><code>ssh -N -f -L 8082:localhost:8080 user@remote_ip_address
</code></pre></li>
</ul>

      </div>
    </div>
    <div class="row-fluid footer">
      <div class="span8 offset2"></div>
    </div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41766728-1', 'rhrn.github.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>